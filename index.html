<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>دعوة</title>
  <!-- Arabic calligraphic font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #080300;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Amiri', 'Scheherazade New', 'Al Nile', 'Geeza Pro', Georgia, serif;
    }

    /* ── BACKDROP (revealed when door opens) ── */
    .backdrop {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse 60% 50% at 50% 45%,
          #7a3d00 0%, #3d1800 40%, #0e0400 80%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 28px;
      pointer-events: none;
      z-index: 0;
    }

    .backdrop-ornament {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .backdrop-line {
      width: 80px;
      height: 1px;
      background: linear-gradient(to right, transparent, #c9a227aa, transparent);
    }

    .backdrop-star {
      color: #c9a227;
      font-size: 1.4rem;
      animation: spin 12s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* ── SCENE WRAPPER ── */
    .scene {
      position: relative;
      z-index: 10;
      cursor: pointer;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    /* Golden ambient glow */
    .scene::before {
      content: '';
      position: absolute;
      inset: -40px;
      background: radial-gradient(
        ellipse at center,
        rgba(201, 162, 39, 0.18) 0%,
        rgba(201, 162, 39, 0.06) 45%,
        transparent 70%
      );
      border-radius: 50%;
      pointer-events: none;
      animation: glow-pulse 3.5s ease-in-out infinite;
    }

    @keyframes glow-pulse {
      0%, 100% { opacity: 0.7; transform: scale(1); }
      50%       { opacity: 1;   transform: scale(1.04); }
    }

    /* ── 3-D DOOR WRAPPER ── */
    .door-3d {
      perspective: 2800px;
      perspective-origin: 50% 50%;
    }

    .door-container {
      position: relative;
      width: min(82vw, 420px);
      aspect-ratio: 75 / 124;
      transform-style: preserve-3d;
    }

    /* ── DOOR PANELS ── */
    .door-panel {
      position: absolute;
      top: 0;
      height: 100%;
      width: 50%;
      background-image: url('door.jpg');
      background-size: 200% 100%;
      background-repeat: no-repeat;
      transition: transform 1.5s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
      will-change: transform;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }

    .door-left {
      left: 0;
      background-position: 0 0;
      transform-origin: left center;
    }

    .door-right {
      right: 0;
      background-position: 100% 0;
      transform-origin: right center;
    }

    /* Centre seam */
    .door-seam {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 100%;
      background: linear-gradient(
        to bottom,
        transparent 0%,
        rgba(201, 162, 39, 0.6) 15%,
        rgba(201, 162, 39, 0.9) 50%,
        rgba(201, 162, 39, 0.6) 85%,
        transparent 100%
      );
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 5;
    }

    /* Light burst */
    .light-burst {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      width: 120%;
      height: 120%;
      background: radial-gradient(
        ellipse at center,
        rgba(255, 210, 100, 0.95) 0%,
        rgba(220, 140, 30, 0.7) 30%,
        rgba(180, 80, 0, 0.3) 60%,
        transparent 80%
      );
      pointer-events: none;
      opacity: 0;
      transition: transform 1.5s ease-out, opacity 1.5s ease-out;
      z-index: 4;
    }

    /* ── OPENED STATE ── */
    .opening .door-left  { transform: rotateY(-120deg); }
    .opening .door-right { transform: rotateY(120deg);  }
    .opening .door-seam  { opacity: 0; }
    .opening .light-burst {
      transform: translate(-50%, -50%) scale(2.8);
      opacity: 1;
    }

    /* ── HINT TEXT ── */
    .hint {
      position: absolute;
      bottom: -48px;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
      color: rgba(201, 162, 39, 0.65);
      font-size: 0.78rem;
      letter-spacing: 0.32em;
      text-transform: uppercase;
      font-family: 'Georgia', serif;
      animation: hint-pulse 2.8s ease-in-out infinite;
    }

    .hint::before, .hint::after {
      content: '✦';
      margin: 0 10px;
      font-size: 0.6rem;
      vertical-align: middle;
    }

    @keyframes hint-pulse {
      0%, 100% { opacity: 0.25; }
      50%       { opacity: 0.85; }
    }

    /* ═══════════════════════════════════════════
       ── INVITATION OVERLAY ──
    ═══════════════════════════════════════════ */
    .invitation-overlay {
      position: fixed;
      inset: 0;
      z-index: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background:
        radial-gradient(ellipse 70% 60% at 50% 50%,
          #2a1000 0%, #150800 50%, #060200 100%);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.9s ease;
      overflow: hidden;
      direction: rtl;
    }

    /* Faint Moroccan tile pattern overlay */
    .invitation-overlay::before {
      content: '';
      position: absolute;
      inset: 0;
      opacity: 0.04;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cpolygon points='40,4 76,22 76,58 40,76 4,58 4,22' fill='none' stroke='%23c9a227' stroke-width='1'/%3E%3Cpolygon points='40,14 66,28 66,52 40,66 14,52 14,28' fill='none' stroke='%23c9a227' stroke-width='0.6'/%3E%3Cline x1='40' y1='4' x2='40' y2='76' stroke='%23c9a227' stroke-width='0.4'/%3E%3Cline x1='4' y1='22' x2='76' y2='58' stroke='%23c9a227' stroke-width='0.4'/%3E%3Cline x1='76' y1='22' x2='4' y2='58' stroke='%23c9a227' stroke-width='0.4'/%3E%3C/svg%3E");
      background-size: 80px 80px;
      pointer-events: none;
    }

    /* Radial corner glows */
    .invitation-overlay::after {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse 40% 40% at 0% 0%,   rgba(201,162,39,0.08) 0%, transparent 60%),
        radial-gradient(ellipse 40% 40% at 100% 0%,  rgba(201,162,39,0.08) 0%, transparent 60%),
        radial-gradient(ellipse 40% 40% at 0% 100%,  rgba(201,162,39,0.06) 0%, transparent 60%),
        radial-gradient(ellipse 40% 40% at 100% 100%,rgba(201,162,39,0.06) 0%, transparent 60%);
      pointer-events: none;
    }

    .invitation-overlay.visible {
      opacity: 1;
      pointer-events: all;
    }

    /* Top ornamental SVG arch */
    .inv-arch {
      position: relative;
      z-index: 2;
      width: min(340px, 80vw);
      margin-bottom: 8px;
      opacity: 0;
      transform: translateY(-12px);
    }

    .invitation-overlay.visible .inv-arch {
      animation: inv-line-in 1s ease 0.3s forwards;
    }

    /* Content card */
    .inv-content {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0;
      text-align: center;
      padding: 0 clamp(20px, 6vw, 60px);
      max-width: 720px;
      width: 100%;
    }

    /* ── individual lines ── */
    .inv-line {
      opacity: 0;
      transform: translateY(14px);
      line-height: 1.7;
      color: #e8d5a3;
    }

    .invitation-overlay.visible .inv-line { animation: inv-line-in 0.9s ease forwards; }

    @keyframes inv-line-in {
      to { opacity: 1; transform: translateY(0); }
    }

    /* Staggered delays */
    .inv-arch       { animation-delay: 0.2s !important; }
    .line-1         { animation-delay: 0.6s; }
    .line-divider   { animation-delay: 1.1s; }
    .line-2         { animation-delay: 1.5s; }
    .line-3         { animation-delay: 2.5s; }
    .line-4         { animation-delay: 3.6s; }
    .line-5         { animation-delay: 4.6s; }
    .line-6         { animation-delay: 5.4s; }
    .line-7         { animation-delay: 6.3s; }
    .line-star      { animation-delay: 7.2s; }
    .line-highlight { animation-delay: 7.8s; }

    /* Title line */
    .line-1 {
      font-size: clamp(1.5rem, 4vw, 2.4rem);
      color: #c9a227;
      font-weight: 700;
      letter-spacing: 0.06em;
      margin-bottom: 6px;
    }

    /* Ornamental divider */
    .line-divider {
      opacity: 0;
      display: flex;
      align-items: center;
      gap: 14px;
      margin: 10px 0 14px;
      width: 100%;
      justify-content: center;
    }

    .invitation-overlay.visible .line-divider { animation: inv-line-in 0.9s ease forwards; }

    .inv-div-line {
      width: 80px;
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(201,162,39,0.7), transparent);
    }

    .inv-div-gem {
      color: #c9a227;
      font-size: 0.9rem;
    }

    /* Body lines */
    .line-2, .line-3, .line-4 {
      font-size: clamp(1rem, 2.6vw, 1.3rem);
      color: rgba(232, 213, 163, 0.88);
      margin-bottom: 5px;
    }

    .line-4 {
      margin-top: 8px;
      margin-bottom: 10px;
    }

    /* Names block */
    .names-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
      margin-bottom: 12px;
    }

    .line-5, .line-6 {
      font-size: clamp(1.05rem, 2.8vw, 1.35rem);
      color: #d4b84a;
      font-weight: 700;
    }

    /* "ليلة من ألف ليلة" line */
    .line-7 {
      font-size: clamp(1rem, 2.5vw, 1.25rem);
      color: rgba(232, 213, 163, 0.8);
      margin-top: 8px;
      font-style: italic;
    }

    /* Star ornament before highlight */
    .line-star {
      opacity: 0;
      color: #c9a227;
      font-size: 1rem;
      letter-spacing: 0.4em;
      margin: 12px 0 8px;
    }

    .invitation-overlay.visible .line-star { animation: inv-line-in 0.9s ease forwards; }

    /* The big name highlight */
    .line-highlight {
      font-size: clamp(1.8rem, 5.5vw, 3.2rem);
      font-weight: 700;
      background: linear-gradient(135deg, #e8c84a 0%, #fff0a0 40%, #c9a227 70%, #e8c84a 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      background-size: 200% 200%;
      animation: inv-line-in 1.1s ease forwards, shimmer 4s ease-in-out 9s infinite !important;
      letter-spacing: 0.08em;
      line-height: 1.3;
    }

    @keyframes shimmer {
      0%, 100% { background-position: 0% 50%; }
      50%       { background-position: 100% 50%; }
    }

    /* ── PROGRESS BAR ── */
    .inv-progress-wrap {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 3;
      height: 3px;
      background: rgba(201, 162, 39, 0.15);
    }

    .inv-progress-bar {
      height: 100%;
      width: 0;
      background: linear-gradient(to right, #c9a22788, #c9a227, #fff0a0, #c9a227);
    }

    /* ── FULL-PAGE GOLD FLASH ── */
    .page-flash {
      position: fixed;
      inset: 0;
      background: radial-gradient(ellipse at center, #fff8dc, #c9a227);
      opacity: 0;
      pointer-events: none;
      z-index: 1000;
      transition: opacity 0.7s ease;
    }

    .page-flash.active {
      opacity: 1;
      pointer-events: all;
    }
  </style>
</head>
<body>

  <!-- Background revealed when door opens -->
  <div class="backdrop">
    <div class="backdrop-ornament">
      <div class="backdrop-line"></div>
      <div class="backdrop-star">✦</div>
      <div class="backdrop-line"></div>
    </div>
  </div>

  <!-- Interactive door -->
  <div class="scene" id="scene">
    <div class="door-3d">
      <div class="door-container" id="doorContainer">
        <div class="door-panel door-left"></div>
        <div class="door-panel door-right"></div>
        <div class="door-seam"></div>
        <div class="light-burst"></div>
      </div>
    </div>
    <div class="hint">Click to Enter</div>
  </div>

  <!-- ══════════════════════════════════════════
       ARABIC INVITATION SCREEN
  ══════════════════════════════════════════ -->
  <div class="invitation-overlay" id="invitationOverlay">

    <!-- Decorative arch SVG -->
    <svg class="inv-arch" viewBox="0 0 340 80" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14 78 L14 46 Q14 6 170 6 Q326 6 326 46 L326 78"
            stroke="#c9a227" stroke-width="1.2" fill="none" opacity="0.9"/>
      <path d="M28 78 L28 50 Q28 20 170 20 Q312 20 312 50 L312 78"
            stroke="#c9a227" stroke-width="0.7" fill="none" opacity="0.5"/>
      <circle cx="170" cy="6"  r="4"   fill="#c9a227" opacity="0.8"/>
      <circle cx="14"  cy="46" r="2.5" fill="#c9a227" opacity="0.5"/>
      <circle cx="326" cy="46" r="2.5" fill="#c9a227" opacity="0.5"/>
      <!-- Small decorative diamonds along the arch -->
      <rect x="167" y="3"  width="6" height="6" transform="rotate(45 170 6)"  fill="none" stroke="#c9a227" stroke-width="0.8" opacity="0.6"/>
      <rect x="100" y="14" width="5" height="5" transform="rotate(45 102 16)" fill="none" stroke="#c9a227" stroke-width="0.6" opacity="0.4"/>
      <rect x="232" y="14" width="5" height="5" transform="rotate(45 234 16)" fill="none" stroke="#c9a227" stroke-width="0.6" opacity="0.4"/>
    </svg>

    <div class="inv-content">

      <div class="inv-line line-1">على خاطرنا</div>

      <div class="line-divider">
        <div class="inv-div-line"></div>
        <span class="inv-div-gem">✦</span>
        <div class="inv-div-line"></div>
      </div>

      <div class="inv-line line-2">نحبوكم تكونو معانا وتشاركونا أحلى لحظات حياتنا.</div>

      <div class="inv-line line-3">وعلى خاطر حضوركم يزيد سهريتنا نور وفرحة.</div>

      <div class="inv-line line-4">بقلوب مليانة بالحب نستدعاوكم :</div>

      <div class="names-block">
        <div class="inv-line line-5">بوها نورالدين &nbsp;،&nbsp; أمها لطيفة</div>
        <div class="inv-line line-6">وخواتها محمد و خليل</div>
      </div>

      <div class="inv-line line-7">باش تعيشو معانا ليلة من ألف ليلة و ليلة</div>

      <div class="inv-line line-star">✦ &nbsp; ✦ &nbsp; ✦</div>

      <div class="inv-line line-highlight">'' وطية ''&nbsp; أميرتنا نورشان</div>

    </div>

    <!-- 15-second progress bar -->
    <div class="inv-progress-wrap">
      <div class="inv-progress-bar" id="progressBar"></div>
    </div>

  </div>

  <!-- Gold flash overlay -->
  <div class="page-flash" id="pageFlash"></div>

  <script>
    let opened = false;

    // ── Background music setup ──
    const bgAudio = new Audio('MAvTW59vhIk.mp3');
    bgAudio.loop   = true;
    bgAudio.volume = 0.55;

    document.getElementById('scene').addEventListener('click', openDoor);
    document.getElementById('scene').addEventListener('touchstart', openDoor, { passive: true });

    function openDoor() {
      if (opened) return;
      opened = true;

      // Start the music on user interaction (satisfies browser autoplay policy)
      bgAudio.play().catch(() => {});

      // Save audio position before leaving so next.html can resume
      window.addEventListener('beforeunload', () => {
        sessionStorage.setItem('audioTime',  bgAudio.currentTime);
        sessionStorage.setItem('audioStamp', Date.now());
      });

      // Step 1 — animate the door panels open
      document.getElementById('doorContainer').classList.add('opening');

      // Step 2 — after door is open, show the invitation text
      setTimeout(showInvitation, 1600);
    }

    function showInvitation() {
      const overlay  = document.getElementById('invitationOverlay');
      const bar      = document.getElementById('progressBar');
      const DURATION = 15000; // 15 seconds

      // Fade in the overlay
      overlay.classList.add('visible');

      // Animate the progress bar over 15 s
      bar.style.transition = `width ${DURATION}ms linear`;
      // Force a reflow so the transition fires from width:0
      bar.getBoundingClientRect();
      bar.style.width = '100%';

      // Step 3 — after 15 seconds, gold-flash and navigate
      setTimeout(() => {
        document.getElementById('pageFlash').classList.add('active');
        setTimeout(() => {
          window.location.href = 'next.html';
        }, 700);
      }, DURATION);
    }
  </script>
</body>
</html>
